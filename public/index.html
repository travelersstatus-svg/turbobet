<!DOCTYPE html>
<html>
<head>
    <title>TurboBet - Official Aviator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body { margin:0; background:#000; color:#fff; font-family:sans-serif; text-align:center; overflow-x:hidden; }
        #game-container { background:#151921; padding:20px; border-radius:0 0 20px 20px; position:relative; min-height:300px; }
        #multiplier { font-size:60px; font-weight:bold; margin-top:80px; transition: 0.1s; }
        .plane { font-size:50px; position:absolute; bottom:50px; left:20px; transition: 0.1s; }
        
        /* Wallet & Buttons Section */
        .wallet-box { background:#222; padding:15px; margin:10px; border-radius:10px; border:1px solid #ff0055; }
        #balanceDisplay { font-size:24px; color:#25D366; font-weight:bold; }
        #bonusDisplay { font-size:14px; color:#ffcc00; }
        
        .btn-group { display:flex; gap:10px; padding:10px; }
        .btn { flex:1; padding:15px; border:none; border-radius:8px; font-weight:bold; color:#fff; cursor:pointer; }
        .btn-deposit { background:#25D366; }
        .btn-withdraw { background:#444; }
        .btn-bet { background:#ff0055; width:90%; font-size:20px; margin-top:10px; }
        
        .crashed { color:red !important; }
    </style>
</head>
<body>

    <div class="wallet-box">
        <div id="balanceDisplay">Wallet: ‚Çπ0.00</div>
        <div id="bonusDisplay">Bonus: ‚Çπ0.00 (Non-withdrawable)</div>
    </div>

    <div id="game-container">
        <div id="multiplier">1.00x</div>
        <div id="plane" class="plane">‚úàÔ∏è</div>
    </div>

    <button class="btn btn-bet" onclick="placeBet()">BET</button>

    <div class="btn-group">
        <button class="btn btn-deposit" onclick="goToDeposit()">‚ûï DEPOSIT (10% Bonus)</button>
        <button class="btn btn-withdraw" onclick="goToWithdraw()">üè¶ WITHDRAW</button>
    </div>

    <script>
        const socket = io();
        const plane = document.getElementById('plane');
        const multDisplay = document.getElementById('multiplier');
        
        // --- WALLET LOGIC ---
        // Naye user ka balance hamesha 0 se shuru hoga
        let realBalance = parseFloat(localStorage.getItem('tb_balance')) || 0;
        let bonusBalance = parseFloat(localStorage.getItem('tb_bonus')) || 0;

        function updateUI() {
            document.getElementById('balanceDisplay').innerText = "Wallet: ‚Çπ" + (realBalance + bonusBalance).toFixed(2);
            document.getElementById('bonusDisplay').innerText = "Bonus: ‚Çπ" + bonusBalance.toFixed(2) + " (Locked)";
            localStorage.setItem('tb_balance', realBalance);
            localStorage.setItem('tb_bonus', bonusBalance);
        }
        updateUI();

        // Admin approval handle karne ke liye
        socket.on('depositApproved', (data) => {
            realBalance += data.amount;
            bonusBalance += data.bonus;
            updateUI();
            alert("‚úÖ Payment Received! ‚Çπ" + data.amount + " + ‚Çπ" + data.bonus + " Bonus added!");
        });

        // --- GAME LOGIC ---
        socket.on('tick', (m) => {
            multDisplay.innerText = m + "x";
            multDisplay.classList.remove('crashed');
            let x = Math.min(parseFloat(m) * 20, window.innerWidth - 60);
            let y = Math.min(parseFloat(m) * 15, 200);
            plane.style.transform = `translate(${x}px, -${y}px)`;
        });

        socket.on('crash', (m) => {
            multDisplay.innerText = "CRASHED @ " + m + "x";
            multDisplay.classList.add('crashed');
            plane.style.transform = `translate(0px, 0px)`;
            // Logic for losing bet goes here
        });

        // --- BUTTON ACTIONS ---
        function goToDeposit() {
            // Apna number yahan dalein
            window.open("https://wa.me/91XXXXXXXXXX?text=I want to deposit money in TurboBet. My ID: " + Math.floor(Math.random()*9999));
        }

        function goToWithdraw() {
            if(realBalance <= 0) {
                alert("Withdrawal Error: Aapka real balance ‚Çπ0 hai. Bonus withdraw nahi kiya ja sakta.");
            } else {
                window.open("https://wa.me/91XXXXXXXXXX?text=Withdrawal Request for ‚Çπ" + realBalance);
            }
        }

        function placeBet() {
            if((realBalance + bonusBalance) <= 0) {
                alert("Please Deposit First!");
                return;
            }
            alert("Bet Placed!");
            // Bet logic yahan aayega
        }
    </script>
</body>
</html>
